@inherits LayoutComponentBase

@using JxAudio.Front.Data
@using Microsoft.Extensions.Localization
@inject HttpClient Http
@inject IStringLocalizer<MainLayout> StringLocalizer

<ThemeLoader></ThemeLoader>
<BootstrapBlazorRoot>
    <Layout ShowGotoTop="false" ShowCollapseBar="true" ShowFooter="true" SideWidth="0"
            IsPage="true" IsFullSide="false" IsFixedHeader="true" IsFixedFooter="true"
            TabDefaultUrl="/" UseTabSet="false" AdditionalAssemblies="new[] { GetType().Assembly }"
            Menus="@Menus" class="@Theme">
        <Header>
            <span class="ms-3 flex-sm-fill d-none d-sm-block layout-title">JxAudio</span>
            <div class="flex-fill">
                <SearchBar></SearchBar>
            </div>
            <ThemeProvider></ThemeProvider>
            <Logout ImageUrl="@_avatar" DisplayName="@User?.UserName" UserName="@User?.UserName">
                <LinkTemplate>
                    <a href="#"><i class="fa-solid fa-suitcase"></i>@StringLocalizer["RePass"]</a>
                    <LogoutLink Url="api/User/Logout"/>
                </LinkTemplate>
            </Logout>
        </Header>
        <Side>
            <div class="layout-banner">
                <img alt="logo" class="layout-logo" src="images/logo.png"/>
                <div class="layout-title">
                    <span>JxAudio</span>
                </div>
            </div>
        </Side>
        <Main>
            <CascadingValue Value="this" IsFixed="true">
                @Body
            </CascadingValue>
        </Main>
        <Footer>
            <PlayerControl></PlayerControl>
        </Footer>
        <NotFound>
            <p>Sorry, there's nothing at this address.</p>
        </NotFound>
    </Layout>
</BootstrapBlazorRoot>